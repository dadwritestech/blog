let currentUnit="km";const kmToMilesFactor=.621371;function updateUnit(){const e=document.getElementById("unitToggle");if(!e)return;currentUnit=e.value;const n=document.getElementsByClassName("unit");for(let e of n)e.textContent=currentUnit;const t=document.getElementById("result");t&&(t.innerText="")}function calculateDistance(){const d=document.getElementById("weekdayDays"),i=document.getElementById("weekdayDistance"),r=document.getElementById("weeksOff"),s=document.getElementById("weekendDistance"),o=document.getElementById("vacationDistance"),e=document.getElementById("result"),a=document.getElementById("unitToggle");if(!d||!i||!r||!s||!o||!e||!a){console.error("Calculator elements missing, cannot calculate."),e&&(e.innerText="Error: Input elements missing.");return}const c=parseFloat(d.value),t=parseFloat(i.value),l=parseFloat(r.value),n=parseFloat(s.value),u=parseFloat(o.value);if(currentUnit=a.value,isNaN(c)||isNaN(t)||isNaN(l)||isNaN(n)||isNaN(u)){e.innerText="Please enter valid numbers in all fields.";return}const h=52,g=h-l,f=c*t*g,p=n*h;let m=f+p+u;currentUnit==="miles"&&(m*=kmToMilesFactor),e.innerText=`Total Annual Distance: ${m.toFixed(2)} ${currentUnit}`}const unitToggleElement=document.getElementById("unitToggle");if(unitToggleElement){updateUnit(),unitToggleElement.addEventListener("change",updateUnit);const e=document.getElementById("calculateButton");if(e)e.addEventListener("click",calculateDistance);else{const e=["weekdayDays","weekdayDistance","weeksOff","weekendDistance","vacationDistance"];e.forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("input",calculateDistance)}),unitToggleElement.addEventListener("change",calculateDistance)}}